<!DOCTYPE html>
<html>
<head>
  <title>Doctor Dashboard</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_KEY"></script>
</head>
<body>
  <h2>Real-Time Doctor Dashboard</h2>
  <div id="map" style="width:100%;height:500px;"></div>

  <script>
    const socket = io("http://YOUR_SERVER_IP:5000");
    let map = new google.maps.Map(document.getElementById('map'), { center: {lat: 20, lng: 77}, zoom: 5 });
    let markers = {};

    socket.on("update_doctors", (doctors) => {
      for (let id in doctors) {
        let doc = doctors[id];
        if (markers[id]) {
          markers[id].setPosition({ lat: doc.lat, lng: doc.lon });
          markers[id].setIcon(doc.online ? "http://maps.google.com/mapfiles/ms/icons/green-dot.png" : "http://maps.google.com/mapfiles/ms/icons/gray-dot.png");
          markers[id].setTitle(`${id} | Last seen: ${doc.last_seen}`);
        } else {
          markers[id] = new google.maps.Marker({
            position: { lat: doc.lat, lng: doc.lon },
            map: map,
            title: `${id} | Last seen: ${doc.last_seen}`,
            icon: doc.online ? "http://maps.google.com/mapfiles/ms/icons/green-dot.png" : "http://maps.google.com/mapfiles/ms/icons/gray-dot.png"
          });
        }
      }
    });
  </script>
</body>
</html>
